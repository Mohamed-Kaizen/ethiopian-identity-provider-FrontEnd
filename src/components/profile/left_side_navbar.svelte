<script>
	export let segment
	import {goto} from "@sapper/app"
	import {fly} from "svelte/transition"
	import {_, locale} from "svelte-i18n"

	import {access_token, refresh_token, user} from "../../store"

	async function sign_out() {
		access_token.set(false)
		refresh_token.set(false)
		user.set(false)
		goto("/")
	}
</script>

<nav
	in:fly="{{x: $_('direction') === 'ltr' ? -200 : 200, duration: 1000}}"
	class="hidden lg:flex w-24 flex-col items-center bg-white dark:bg-gray-800
	py-4">

	<div>
		<!-- App Logo -->

		<svg
			class="h-8 w-8 fill-current text-red-600 dark:text-red-200"
			viewBox="0 0 480 512">
			<path
				fill="currentColor"
				d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1
				10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2
				65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2
				2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5
				41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8
				45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4
				9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0
				16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3
				50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8
				3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8
				0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0
				150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7
				55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path>
		</svg>

	</div>

	<ul class="mt-2 text-gray-900 dark:text-gray-400 capitalize">
		<!-- Links -->

		<li
			class="mt-5 p-3 {segment === undefined ? 'text-red-600 bg-red-200' : 'hover:text-red-600 hover:bg-red-200'}
			rounded-lg">

			<a href="profile/">

				<svg class="fill-current h-5 w-5" viewBox="0 0 24 24">
					<path
						d="M19 5v2h-4V5h4M9 5v6H5V5h4m10 8v6h-4v-6h4M9
						17v2H5v-2h4M21 3h-8v6h8V3M11 3H3v10h8V3m10
						8h-8v10h8V11m-10 4H3v6h8v-6z"></path>
				</svg>

			</a>

		</li>

		<li class="mt-5 p-3 hover:text-red-600 hover:bg-red-200 rounded-lg">

			<a
				href="https://ethiopia-identity-provider.herokuapp.com/o/authorized_tokens/"
				target="blank">

				<svg class="fill-current h-5 w-5" viewBox="0 0 24 24">
					<path d="M0 0h24v24H0z" fill="none"></path>
					<path
						d="M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6
						0h4v-4H4v4zm0-6h4v-4H4v4zm6
						0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6
						6h4v-4h-4v4zm0 6h4v-4h-4v4z"></path>
				</svg>

			</a>

		</li>

		<li
			class="mt-5 p-3 {segment === 'change-password' ? 'text-red-600 bg-red-200' : 'hover:text-red-600 hover:bg-red-200'}
			rounded-lg">

			<a href="profile/change-password/">
				<svg
					class="fill-current h-5 w-5"
					viewBox="0 0 122.879 118.662"
					enable-background="new 0 0 122.879 118.662"
					xml:space="preserve">
					<g>
						<path
							fill-rule="evenodd"
							clip-rule="evenodd"
							d="M43.101,54.363h4.138v-8.738c0-4.714,1.93-8.999,5.034-12.105v-0.004
							c3.105-3.105,7.392-5.034,12.108-5.034c4.714,0,8.999,1.929,12.104,5.034l0.004,0.004c3.104,3.105,5.034,7.392,5.034,12.104v8.738
							l3.297,0.001c0.734,0,1.335,0.601,1.335,1.335v28.203c0,0.734-0.602,1.335-1.336,1.335H43.101c-0.734,0-1.336-0.602-1.336-1.335
							V55.698C41.765,54.964,42.366,54.363,43.101,54.363L43.101,54.363z
							M16.682,22.204c-1.781,2.207-3.426,4.551-5.061,7.457
							c-5.987,10.645-8.523,22.731-7.49,34.543c1.01,11.537,5.432,22.827,13.375,32.271c2.853,3.392,5.914,6.382,9.132,8.968
							c11.112,8.935,24.276,13.341,37.405,13.216c13.134-0.125,26.209-4.784,37.145-13.981c3.189-2.682,6.179-5.727,8.915-9.13
							c6.396-7.957,10.512-17.29,12.071-27.138c1.532-9.672,0.595-19.829-3.069-29.655c-3.487-9.355-8.814-17.685-15.775-24.206
							C96.695,8.333,88.593,3.755,79.196,1.483c-2.943-0.712-5.939-1.177-8.991-1.374c-3.062-0.197-6.193-0.131-9.401,0.224
							c-2.011,0.222-3.459,2.03-3.238,4.041c0.222,2.01,2.03,3.459,4.04,3.237c2.783-0.308,5.495-0.366,8.141-0.195
							c2.654,0.171,5.23,0.568,7.731,1.174c8.106,1.959,15.104,5.914,20.838,11.288c6.138,5.751,10.847,13.125,13.941,21.427
							c3.212,8.613,4.035,17.505,2.696,25.959c-1.36,8.589-4.957,16.739-10.553,23.699c-2.469,3.071-5.121,5.78-7.912,8.127
							c-9.591,8.067-21.031,12.153-32.502,12.263c-11.473,0.109-23.001-3.762-32.764-11.61c-2.895-2.328-5.621-4.983-8.129-7.966
							c-6.917-8.224-10.771-18.092-11.655-28.202c-0.908-10.375,1.317-20.988,6.572-30.331c1.586-2.82,3.211-5.071,5.013-7.241
							l0.533,14.696c0.071,2.018,1.765,3.596,3.782,3.524s3.596-1.765,3.524-3.782l-0.85-23.419c-0.071-2.019-1.765-3.596-3.782-3.525
							c-0.126,0.005-0.25,0.016-0.372,0.032v-0.003L3.157,16.715c-2.001,0.277-3.399,2.125-3.122,4.126
							c0.276,2.002,2.124,3.4,4.126,3.123L16.682,22.204L16.682,22.204L16.682,22.204z
							M53.899,54.363h20.963v-8.834
							c0-2.883-1.18-5.504-3.077-7.403l-0.002,0.001c-1.899-1.899-4.521-3.08-7.402-3.08c-2.883,0-5.504,1.18-7.404,3.078
							c-1.898,1.899-3.077,4.521-3.077,7.404V54.363L53.899,54.363L53.899,54.363z
							M64.465,69.795l2.116,9.764l-5.799,0.024l1.701-9.895
							c-1.584-0.509-2.733-1.993-2.733-3.747c0-2.171,1.76-3.931,3.932-3.931c2.17,0,3.931,1.76,3.931,3.931
							C67.612,67.845,66.261,69.433,64.465,69.795L64.465,69.795L64.465,69.795z"></path>
					</g>
				</svg>

			</a>

		</li>

	</ul>

	<div
		class="mt-auto flex items-center p-3 hover:text-red-600 hover:bg-red-200
		dark:text-gray-400 rounded-lg">
		<!-- important action -->

		<button on:click="{sign_out}">

			<svg
				class="fill-current h-5 w-5 {$_('direction') === 'ltr' ? '' : 'transform rotate-180'}"
				viewBox="0 0 24 24">
				<path
					d="M16 17v-3H9v-4h7V7l5 5-5 5M14 2a2 2 0 012
					2v2h-2V4H5v16h9v-2h2v2a2 2 0 01-2 2H5a2 2 0 01-2-2V4a2 2 0
					012-2h9z"></path>
			</svg>

		</button>

	</div>

</nav>
